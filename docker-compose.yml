services:
  go-ingestor:
    build:
      context: ./src/services/go-ingestor
    #volumes:
    #- ./data/:/app/data
    ports:
      - "3000:3000"

  go-client-1:
    build:
      context: ./src/services/go-client
    command: ["./go-client", "--batch", "2500", "--interval", "10"]
    depends_on:
      - go-ingestor

  go-client-2:
    build:
      context: ./src/services/go-client
    command:
      [
        "./go-client",
        "--batch",
        "2500",
        "--interval",
        "10",
        "--format",
        "proto",
      ]
    depends_on:
      - go-ingestor
  go-client-3:
    build:
      context: ./src/services/go-client
    command:
      ["./go-client", "--batch", "2500", "--interval", "10", "--format", "avro"]
    depends_on:
      - go-ingestor
  go-client-4:
    build:
      context: ./src/services/go-client
    command:
      ["./go-client", "--batch", "2500", "--interval", "10", "--format", "raw"]
    depends_on:
      - go-ingestor
